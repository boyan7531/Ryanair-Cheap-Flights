<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configure Email Notifications</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <nav>
        <ul>
            <li><a href="{{ url_for('index') }}">Single Round Trip</a></li>
            <li><a href="{{ url_for('multi_round_trip_form') }}">Multi-City Round Trip</a></li>
            <li><a href="{{ url_for('sofia_deals') }}">Sofia Deals</a></li>
            <li><a href="{{ url_for('configure_notifications') }}" class="active">Notification Settings</a></li>
        </ul>
    </nav>

    <h1>Configure Background Email Notifications</h1>
    <p>Set the parameters for the automatic background check (runs every 10 minutes). Emails will be sent to the address configured in your <code>.env</code> file (<code>MAIL_RECIPIENT</code>) if deals under â‚¬25 are found for these settings.</p>

    <!-- Display flashed messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <ul class=flashes>
        {% for category, message in messages %}
          <li class="{{ category }}">{{ message }}</li>
        {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}

    <form method="POST" action="{{ url_for('configure_notifications') }}">
        <label for="outbound_month">Month to Check:</label>
        <input type="month" id="outbound_month" name="outbound_month" required value="{{ current_settings.outbound_month }}">

        <label for="duration_from">Min Duration (days):</label>
        <input type="number" id="duration_from" name="duration_from" min="1" value="{{ current_settings.duration_from }}" required>

        <label for="duration_to">Max Duration (days):</label>
        <input type="number" id="duration_to" name="duration_to" min="1" value="{{ current_settings.duration_to }}" required>

        <button type="submit">Save Notification Settings</button>
    </form>

    <div style="margin-top: 20px; padding-top: 15px; border-top: 1px solid #ccc;">
        <p><strong>Current Settings Used by Background Checker:</strong></p>
        <p>
            Month: <code>{{ current_settings.outbound_month }}</code><br>
            Duration: <code>{{ current_settings.duration_from }}</code> - <code>{{ current_settings.duration_to }}</code> days
        </p>
    </div>

</body>
</html> 